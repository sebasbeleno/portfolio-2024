---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { CldImage } from "astro-cloudinary";

interface Props {
  post: CollectionEntry<"blog">;
}

export async function getStaticPaths() {
  const blogPosts = await getCollection("blog");
  return blogPosts.map((post: any) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
  <div class="relative !z-50 max-w-6xl mx-10 md:mx-auto">
    <a href="/">
      <div class="mb-4">
        <!--?xml version="1.0" encoding="UTF-8"?-->
        <svg
          width="26px"
          height="26px"
          stroke-width="2.3"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          color="#ffffff"
          ><path
            d="M15 6L9 12L15 18"
            stroke="#ffffff"
            stroke-width="2.3"
            stroke-linecap="round"
            stroke-linejoin="round"></path></svg
        >
      </div>
    </a>
    <CldImage
      src={post.data.cover}
      alt={post.data.title}
      width={1200}
      height={300}
      class="rounded-lg"
    />
    <article
      class="prose prose-2xl prose-headings:text-white prose-p:text-white mx-auto mt-4"
    >
      <h1 class="text-2xl md:!text-5xl md:!leading-[1.2]">{post.data.title}</h1>
      <p class="text-xl">{post.data.excerpt}</p>

      <p class="text-sm">
        {new Intl.DateTimeFormat(Astro.preferredLocale, {
          dateStyle: "long",
        }).format(new Date(post.data.date))}
      </p>

      <div class="h-0.5 bg-slate-400 opacity-20"></div>

      <div class="">
        <Content />
      </div>
    </article>
  </div>
</Layout>
